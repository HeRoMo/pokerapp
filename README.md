# PorkerApp README

ポーカーの役の判定を行うアプリケーション

## 動作環境
* Ruby version 2.2.0
* Rails 4.2.6
* AWS t2.micro

## 使い方
### UI
UIには次のURLでアクセスできます。

 http://poker-dev.nhvresxnkp.ap-northeast-1.elasticbeanstalk.com/

1文字で表されるスート(S、H、D、C)と1から13の数字の組をカードとします。

例:
- S1 ... スペードのエース
- H3 ... ハートの3
- D9 ... ダイアの9
- C13 ... クラブの13

手札は半角スペース区切りで5枚のカードを入力してください

例:
- H1 D10 S11 H12 H13

スートは小文字でも構いません。<br>
テキストボックスに入力するとすぐに判定します。<br>
結果はテキストボックスの下に表示されます。

### API

#### リクエスト

- Endpoint URL: http://poker-dev.nhvresxnkp.ap-northeast-1.elasticbeanstalk.com/api/v1/poker/judge
- Method: POST
- Content-Types: application/json

リクエストボディには5枚のカードを半角スペースで区切った文字列配列を含むJSONをセットしてください。<br>
カードはジョーカーを含まない52種類から選んでください。<Br>
スートは小文字でも構いません。

例:
```json
{
  cards: [ "H1 H13 H12 H11 H10”, "H9 C9 S9 H2 C2”, "C13 D12 C11 H8 H7” ]
}
```

#### レスポンス
カード(card)、役の名前(hand)、最も強い役(best)を含む、JSONのリストを返します。<br>
bestは最も強い役のデータのみに含まれませす。<br>
同じ役の場合は強弱は考慮しません。最も強い役が複数ある場合、その役 全てにbestを含めます。<br>

次の場合、エラーとします
- 53種類に含まれない文字列がリクエストボディに含まれている
- リクエストで与えられる一つの手札の中でカードが重複する
- リクエストで与えられる複数の手札間でカードが重複している

## 役 の判定 考察

以下の表のように役の特性を整理し判定方法を検討した。

|役名|定義|タイプ|数字パターン|スートの種類数|最大数-最小数|例|
|---|---|---|---|---|---|---|
|ストレート・フラッシュ|同じスートで数字が連続する<br>5枚のカードで構成されている場合|ストレート系|[1,1,1,1,1]|1|4|"C7 C6 C5 C4 C3"<br>"H1 H13 H12 H11 H10"|
|４カード|同じ数字のカードが<br>4枚含まれる場合|ペア系|[1,4]|4|4以外|"C10 D10 H10 S10 D5"<br>"D6 H6 S6 C6 S13"|
|フルハウス|同じ数字のカード3枚と、別の同じ数字の<br>カード2枚で構成されている場合|ペア系|[2,3]|3,4|4以外|"S10 H10 D10 S4 D4"<br>"H9 C9 S9 H1 C1"|
|フラッシュ|同じスートのカード5枚で<br>構成されている場合|ストレート系|[1,1,1,1,1]|1|4以外|"H1 H12 H10 H5 H3"<br>"S13 S12 S11 S9 S6"|
|ストレート|数字が連続した5枚のカード<br>によって構成されている場合|ストレート系|[1,1,1,1,1]|2,3,4|4|"S8 S7 H6 H5 S4"<br>"D6 S5 D4 H3 C2"|
|スリーカード|同じ数字の札3枚と数字の<br>違う2枚の札から構成されている場合|ペア系|[1,1,3]|3,4|4以外|"S12 C12 D12 S5 C3"<br>"C5 H5 D5 D12 C10"|
|ツーペア|同じ数の2枚組を2組と<br>他のカード1枚で構成されている場合|ペア系|[1,2,2]|2,3,4|4以外|"H13 D13 C2 D2 H11"<br>"D11 S11 S10 C10 S9"|
|ワンペア|同じ数字の2枚組とそれぞれ異なった<br>数字の札3枚によって構成されている場合|ペア系|[1,1,1,2]|2,3,4|4以外|"C10 S10 S6 H4 H2"<br>"H9 C9 H1 D12 D10"|
|ハイカード|上述の役が1つも<br>成立しない場合|-|[1,1,1,1,1]|2,3,4|4以外|"D1 D10 S9 C5 C4"<br>"C13 D12 C11 H8 H7"|


